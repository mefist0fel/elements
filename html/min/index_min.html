<html>
	<head>
		<title>Elements prot</title>
		<style type="text/css">
		body {
			display: block;
			background-color:0;
			width: 100%;
			height: 100%;
			margin: 0;
		}
		canvas {
			background-color:#ffffff;
			display: block;
			margin: 0px auto;
		}
		</style>
	</head>
	<body>
		<canvas id="tutorial"></canvas>
	</body>
	<script type="text/javascript">function c(a,b){return[a[0]+b[0],a[1]+b[1],a[2]+b[2]]}function d(a,b){return[a[0]-b[0],a[1]-b[1],a[2]-b[2]]}function f(a,b){return Math.sqrt((a[0]-b[0])*(a[0]-b[0])+(a[1]-b[1])*(a[1]-b[1]))}function h(a){return k(a,1/f(a,[0,0,0]))}function k(a,b){return[a[0]*b,a[1]*b,a[2]*b]}function m(a){var b=newCoord;return b[0]>=a[0]&&b[0]<=a[2]&&b[1]>=a[1]&&b[1]<=a[3]}
var n=[1,1,0,0,0,0,0,0,0,1,0,0,0,0,0,0,1,2,1,0,0,1,0,0,0,1,1,0,0,1,0,0,1,2,2,1,1,0,0,0,1,1,1,0,1,0,0,0,1,1,1,1,1,1,0,0,0,0,0,1,1,1,0,0,0,1,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,1,0,0,0,0,0,0,1,1,1,0,0,0,0,0,1,1,1,0,0,0,0,0,0,1,0,0,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,1,1,0,0,1,0,0,0,1,1,0,0,1,0,0,1,1,1,0,1,0,0,0,1,1,1,0,1,0,0,0,0,0,0,1,1,1,0,0,0,0,0,1,1,1,0,0,0,1,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,1,0,0,0,0,0,0,1,1,1,0,0,0,0,0,1,1,1,0,0,0,0,0,0,1,0,0,0,
0,0,0,0,1,0,0,0,0],p,q=0,s=r(),t=1/30;function u(){return{c:!1,position:[0,0,0],a:[0,0,0],d:100,b:20}}var v=document.getElementById("tutorial"),w=v.getContext("2d");v.width=1024;v.height=768;rect=v.getBoundingClientRect();
var x=function(a){for(var b={key:[200],e:!1,f:[0,0]},e=0;200>e;e++)b.key[e]=!1;document.addEventListener("keydown",function(a){b.key[a.keyCode]=!0},!1);document.addEventListener("keyup",function(a){b.key[a.keyCode]=!1},!1);document.addEventListener("click",function(){},!1);document.addEventListener("mousedown",function(){b.e=!0},!1);document.addEventListener("mouseup",function(){b.e=!1},!1);document.addEventListener("mousemove",function(e){b.f[0]=e.clientX-a.left;b.f[1]=e.clientY-a.top},!1);document.addEventListener("touchstart",
function(){},!1);document.addEventListener("touchmove",function(){},!1);return b}(rect,v),y=u();y.position=[3,3,.3];for(var z=[200],A=0;200>A;A++)z[A]=u();function r(){return window.performance&&window.performance.now?window.performance.now():(new Date).getTime()}function B(a){return[70*a[0]-70*a[1]+512,40*a[0]+40*a[1]-70*a[2]]}
function C(a){w.beginPath();var b=B(a[0]);w.moveTo(b[0],b[1]);b=B(a[1]);w.lineTo(b[0],b[1]);b=B(a[2]);w.lineTo(b[0],b[1]);b=B(a[3]);w.lineTo(b[0],b[1]);w.closePath();w.fill();w.stroke()}function D(a){return"rgba("+a+","+a+","+a+",1)"}
function E(){p=r();q+=Math.min(1,(p-s)/1E3);q>t&&(q=t);y.a=[0,0,y.a[2]];if(x.key[38]||x.key[87])y.a=c(y.a,[-1,-1,0]);if(x.key[40]||x.key[83])y.a=c(y.a,[1,1,0]);if(x.key[37]||x.key[65])y.a=c(y.a,[-1,1,0]);if(x.key[39]||x.key[68])y.a=c(y.a,[1,-1,0]);x.key[32]&&.2>=y.position[2]&&(y.a=c(y.a,[0,0,3]));if(x.e)for(var a=y.position,b=h(d(x.f,y.position)),e=0;200>e;e++)if(!z[e].c){z[e].c=!0;z[e].position=a;z[e].a=k(c(b,[.1*Math.random()-.05,.1*Math.random()-.05,0]),400);z[e].d=3;break}y.a[2]-=3*t;newCoord=
c(y.position,k(y.a,t));points=[[400,400,0],[500,400,0],[500,500,0],[400,500,0]];for(a=0;4>a;a++)dist=f(newCoord,points[a]),dist<=y.b&&(newCoord=c(newCoord,k(h(d(points[a],newCoord)),dist-y.b)));m([400-y.b,400,500+y.b,500])&&(newCoord[0]=450>newCoord[0]?400-y.b:500+y.b);m([400,400-y.b,500,500+y.b])&&(newCoord[1]=450>newCoord[1]?400-y.b:500+y.b);dist=f(newCoord,[200,400]);dist<y.b+50&&(newCoord=c(newCoord,k(h(d([200,400],newCoord)),dist-y.b-50)));.2>newCoord[2]&&(y.a[2]=0,newCoord[2]=.2);y.position=
newCoord;for(a=0;200>a;a++)z[a].c&&(z[a].position=c(z[a].position,k(z[a].a,t)),z[a].d-=t,0>z[a].d&&(z[a].c=!1));w.fillStyle="#000000";w.fillRect(0,0,1024,768);for(a=0;16>a;a++)for(b=0;16>b;b++)if(0<n[16*a+b]){var e=a,g=b,l=n[16*a+b]-1;w.fillStyle=.5<(e+g)%2?D(240+10*l):D(230+10*l);w.strokeStyle=w.fillStyle;C([[e,g,l],[e+1,g,l],[e+1,g+1,l],[e,g+1,l]]);w.fillStyle="#cccccc";C([[e+1,g,l],[e+1,g+1,l],[e+1,g+1,-1],[e+1,g,-1]]);w.fillStyle="#dddddd";C([[e,g+1,l],[e+1,g+1,l],[e+1,g+1,-1],[e,g+1,-1]]);w.fill()}w.strokeStyle=
"#000000";w.fillStyle="rgba(0,0,0,0.2)";w.beginPath();w.font="20pt Arial";onMap=[Math.floor(y.position[0]),Math.floor(y.position[1])];w.fillText("coord "+onMap[0]+" "+onMap[1]+" "+n[16*onMap[0]+onMap[1]],10,30);1<=n[16*onMap[0]+onMap[1]]&&(a=B([y.position[0],y.position[1],0]),w.arc(a[0],a[1],Math.max(y.b*(2-y.position[2])*.5,3),0,2*Math.PI),w.closePath(),w.fill());w.fillStyle="#FF0000";w.beginPath();a=B(y.position);w.arc(a[0],a[1],y.b,0,2*Math.PI);w.closePath();w.fill();w.fillStyle="#FFFFFF";w.beginPath();
a=B(y.position);w.arc(a[0]+.3*y.b,a[1]-.3*y.b,.2*y.b,0,2*Math.PI);w.closePath();w.fill();w.strokeRect(400,400,100,100);w.beginPath();w.arc(200,400,50,0,2*Math.PI);w.closePath();w.stroke();for(a=0;200>a;a++)z[a].c&&w.fillRect(z[a].position[0]-1,z[a].position[1]-1,2,2);s=p;requestAnimationFrame(E)}requestAnimationFrame(E);
	</script>
</html>